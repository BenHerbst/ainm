[ ] Split main controller into classes 2021-10-29
